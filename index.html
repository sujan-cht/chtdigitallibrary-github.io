<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHT Digital Library | পার্বত্য চট্টগ্রাম ডিজিটাল লাইব্রেরি</title>
    
    <!-- Google Fonts: Hind Siliguri -->
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        emerald: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            600: '#059669',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
            scroll-behavior: smooth;
        }
        .glass {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .hero-section {
            background-image: linear-gradient(to bottom, rgba(6, 78, 59, 0.85), rgba(6, 78, 59, 0.95)), url('https://images.unsplash.com/photo-1501785888041-af3ef285b470?auto=format&fit=crop&q=80&w=2070');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .book-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .book-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.1);
        }
        .btn-active {
            background-color: #065f46 !important;
            color: white !important;
            border-color: #065f46 !important;
        }
        /* Hide scrollbar for category list */
        .category-scroll::-webkit-scrollbar {
            display: none;
        }
        .category-scroll {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        @media (max-width: 640px) {
            .book-card h3 { font-size: 0.9rem; }
            .book-card p { font-size: 0.7rem; }
            .hero-title { font-size: 2.2rem; }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <!-- Navbar -->
    <nav class="glass sticky top-0 z-50 border-b border-emerald-100">
        <div class="container mx-auto px-4 md:px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center gap-3" onclick="resetView()">
                <div class="bg-emerald-700 text-white w-10 h-10 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-200">
                    <i class="fas fa-layer-group text-lg"></i>
                </div>
                <div>
                    <span class="text-xl md:text-2xl font-bold text-emerald-900 tracking-tight">CHT</span>
                    <span class="text-xl md:text-2xl font-light text-emerald-700">Digital Library</span>
                </div>
            </a>
            
            <div class="hidden lg:flex items-center space-x-8 font-medium">
                <a href="#" class="text-emerald-900 hover:text-emerald-600 transition" onclick="resetView()">হোম</a>
                <a href="#books" class="text-emerald-900 hover:text-emerald-600 transition">লাইব্রেরি</a>
                <div id="authContainer">
                    <button id="loginBtn" class="bg-emerald-700 hover:bg-emerald-800 text-white px-6 py-2 rounded-full transition shadow-md">
                        লগইন
                    </button>
                </div>
            </div>
            <button class="lg:hidden text-emerald-900 text-2xl"><i class="fas fa-bars"></i></button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-section relative py-20 md:py-32 px-4 text-white">
        <div class="container mx-auto relative z-10 text-center">
            <h1 class="hero-title text-4xl md:text-6xl font-extrabold mb-6 leading-tight tracking-tight">পাহাড়ের জ্ঞান ভাণ্ডার এখন <span class="text-emerald-400">ডিজিটাল</span></h1>
            <p class="text-lg text-emerald-100 mb-10 max-w-2xl mx-auto opacity-90 font-medium">চাকমা, মারমা, ত্রিপুরাসহ পার্বত্য চট্টগ্রামের সকল ভাষা ও সংস্কৃতির বই সংগ্রহ করুন এক ক্লিকেই।</p>
            
            <div class="max-w-2xl mx-auto flex flex-col md:flex-row gap-3 bg-white/10 p-2 rounded-2xl border border-white/20 backdrop-blur-md">
                <div class="flex-1 relative">
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-emerald-200"></i>
                    <input type="text" id="searchInput" placeholder="বই, লেখক বা বিষয় দিয়ে অনুসন্ধান করুন..." class="w-full py-4 pl-12 pr-6 bg-white rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-emerald-500">
                </div>
                <button onclick="switchToGallery()" class="bg-emerald-600 hover:bg-emerald-500 text-white px-8 py-4 rounded-xl font-bold transition shadow-xl">খুঁজুন</button>
            </div>
        </div>
    </header>

    <!-- Library Section -->
    <main id="books" class="container mx-auto px-4 py-16">
        <div class="mb-12">
            <h2 id="viewTitle" class="text-3xl font-bold text-slate-900 mb-6 text-center md:text-left">বইয়ের সংগ্রহশালা</h2>
            
            <!-- Horizontal Scroll Category Filters -->
            <div class="relative">
                <div class="flex items-center overflow-x-auto category-scroll gap-2 pb-4 scroll-smooth" id="categoryFilters">
                    <button onclick="filterBooks('All')" class="category-btn btn-active px-6 py-2.5 rounded-xl border border-slate-200 bg-white transition font-medium text-sm shadow-sm flex-shrink-0">সবগুলো</button>
                    <button onclick="filterBooks('ইতিহাস')" class="category-btn px-6 py-2.5 rounded-xl border border-slate-200 bg-white transition font-medium text-sm shadow-sm flex-shrink-0">ইতিহাস</button>
                    <button onclick="filterBooks('ভাষা')" class="category-btn px-6 py-2.5 rounded-xl border border-slate-200 bg-white transition font-medium text-sm shadow-sm flex-shrink-0">ভাষা</button>
                    <button onclick="filterBooks('শিক্ষা')" class="category-btn px-6 py-2.5 rounded-xl border border-slate-200 bg-white transition font-medium text-sm shadow-sm flex-shrink-0">শিক্ষা</button>
                    <button onclick="filterBooks('সংস্কৃতি')" class="category-btn px-6 py-2.5 rounded-xl border border-slate-200 bg-white transition font-medium text-sm shadow-sm flex-shrink-0">সংস্কৃতি</button>
                    <button onclick="filterBooks('সাহিত্য')" class="category-btn px-6 py-2.5 rounded-xl border border-slate-200 bg-white transition font-medium text-sm shadow-sm flex-shrink-0">সাহিত্য</button>
                </div>
                <div class="absolute right-0 top-0 h-full w-8 bg-gradient-to-l from-slate-50 to-transparent pointer-events-none md:hidden"></div>
            </div>
        </div>

        <div id="contentDisplay"></div>

        <div id="allBooksWrapper" class="hidden text-center mt-16">
            <button onclick="switchToGallery()" class="bg-emerald-900 text-white px-10 py-4 rounded-full font-bold hover:bg-emerald-700 transition shadow-2xl transform hover:scale-105">
                <i class="fas fa-th-large mr-2"></i> সকল বই দেখুন
            </button>
        </div>

        <div id="noBooks" class="hidden text-center py-24">
            <div class="bg-slate-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-search text-slate-300 text-3xl"></i>
            </div>
            <p class="text-xl text-slate-400 font-medium">দুঃখিত, কোনো বই পাওয়া যায়নি!</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t py-12 text-center">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-center gap-3 mb-4">
                <div class="bg-emerald-700 text-white w-8 h-8 rounded-lg flex items-center justify-center">
                    <i class="fas fa-layer-group text-sm"></i>
                </div>
                <span class="text-xl font-bold text-slate-900">CHT Digital Library</span>
            </div>
            <p class="text-slate-500 text-sm mb-2">পার্বত্য চট্টগ্রামের তেরটি ক্ষুদ্র নৃ-গোষ্ঠীর জ্ঞান ও ঐতিহ্য সংরক্ষণে একটি অবাণিজ্যিক প্রয়াস।</p>
            <p class="text-slate-400 text-xs">© ২০২৪-২০২৬ সর্বস্বত্ব সংরক্ষিত। কারিগরি সহায়তায়: <span class="text-emerald-700 font-bold uppercase tracking-widest">Mazara</span></p>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        let firebaseConfig = {};
        try {
            if (typeof __firebase_config !== 'undefined' && __firebase_config) {
                firebaseConfig = JSON.parse(__firebase_config);
            }
        } catch (e) { console.warn("Firebase config not found."); }

        if (firebaseConfig.apiKey) {
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const provider = new GoogleAuthProvider();
            const authContainer = document.getElementById('authContainer');

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    authContainer.innerHTML = `
                        <div class="flex items-center gap-3 bg-emerald-50 px-3 py-1.5 rounded-full border border-emerald-100">
                            <img src="${user.photoURL}" class="w-7 h-7 rounded-full border border-emerald-500" alt="Avatar">
                            <button id="logoutBtn" class="text-emerald-700 hover:text-red-600 transition ml-1"><i class="fas fa-power-off"></i></button>
                        </div>`;
                    document.getElementById('logoutBtn').addEventListener('click', () => signOut(auth));
                } else {
                    setupLoginButton(auth, provider);
                }
            });
        }

        function setupLoginButton(auth, provider) {
            const authContainer = document.getElementById('authContainer');
            authContainer.innerHTML = `<button id="loginBtn" class="bg-emerald-700 hover:bg-emerald-800 text-white px-6 py-2 rounded-full shadow-md transition font-medium text-sm">লগইন</button>`;
            document.getElementById('loginBtn').addEventListener('click', () => {
                signInWithPopup(auth, provider).catch(err => console.error("Login Error:", err));
            });
        }
    </script>

    <script>
        // Dummy Cover URL
        const dummyCover = "https://images.unsplash.com/photo-1543004629-1420f545a133?q=80&w=400&auto=format&fit=crop";

        const books = [
            // ক্যাটাগরি: ভাষা
            { id: 1, title: "চাকমা কথাতারা (ডিকশনারি)", author: "পুলিন বয়ন চাকমা", category: "ভাষা", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=1htB8QXxTpxYJXzXBWZUOOVCXuOfwPVK_llxSw9hB_68" },
            { id: 2, title: "চাকমা ওয়ার্ড বুক", author: "সুজন চাকমা", category: "ভাষা", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=1ZFjUYq1uXN8I24uEMwgox0aZy8Q_kArR" },
            { id: 3, title: "বাংলা থেকে চাকমা প্রতিলিপিকরণ", author: "সুজন চাকমা", category: "ভাষা", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=1DWDzHPpt_unUyhlAMwEfmnuJWMX1wCyDx56ZoyzcJZc" },
            { id: 4, title: "চাঙমা ভাচ্ আলাম", author: "আর্য্যমিত্র চাকমা", category: "ভাষা", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=11G2RVMFL-fgKrCjZEs_n-1hV3MGZzSYv" },
            { id: 5, title: "প্রযুক্তিতে চাকমা ভাষার উন্নয়ন", author: "বিভূতি চাকমা", category: "ভাষা", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=1RwuQvyHpKzy-CsAMYJQOAbYsxuT_q3IW" },

            // ক্যাটাগরি: ইতিহাস
            { id: 6, title: "চাকমা পরিচিতি", author: "সুগত চাকমা", category: "ইতিহাস", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=1CrtG8Ss5TRwQ7SCNpRBcjQ5FMba445_I" },
            { id: 7, title: "পার্বত্য চট্টগ্রামের আদিবাসী সমাজ", author: "প্রশান্ত ত্রিপুরা", category: "ইতিহাস", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" },
            { id: 8, title: "চাকমা জাতির ইতিবৃত্ত", author: "বিরজ কুমার তঞ্চঙ্গ্যা", category: "ইতিহাস", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" },

            // ক্যাটাগরি: শিক্ষা
            { id: 9, title: "চাঙমা বই (৩য় শ্রেণী)", author: "CADC", category: "শিক্ষা", cover: dummyCover, downloadUrl: "https://drive.google.com/open?id=1-ydtI-2xzl6Tg3ZF1wBa2koa3Te4yjqA" },
            { id: 10, title: "চাকমা প্রাথমিক বর্ণমালা", author: "শিক্ষা বোর্ড", category: "শিক্ষা", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" },

            // ক্যাটাগরি: সংস্কৃতি
            { id: 11, title: "জুম পাহাড়ে উৎসব", author: "মং হ্লা প্রু", category: "সংস্কৃতি", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" },
            { id: 12, title: "ত্রিপুরা সংস্কৃতি ও ঐতিহ্য", author: "বিবিধ গবেষক", category: "সংস্কৃতি", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" },

            // ক্যাটাগরি: সাহিত্য
            { id: 13, title: "পাহাড়ি ছোটগল্প সংকলন", author: "সুহৃদ চাকমা", category: "সাহিত্য", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" },
            { id: 14, title: "মারমা লোকগাঁথা", author: "উ ক্য জ", category: "সাহিত্য", cover: dummyCover, downloadUrl: "https://drive.google.com/drive/folders/1j8EfWVGAjldOY2KH66pbQzz15UDfEuNB" }
        ];

        const contentDisplay = document.getElementById('contentDisplay');
        const searchInput = document.getElementById('searchInput');
        const noBooks = document.getElementById('noBooks');
        const allBooksWrapper = document.getElementById('allBooksWrapper');
        const viewTitle = document.getElementById('viewTitle');

        function createCard(book) {
            return `
                <div class="book-card bg-white rounded-2xl overflow-hidden shadow-sm flex flex-col border border-slate-100 group h-full">
                    <div class="relative overflow-hidden aspect-[3/4] bg-emerald-50">
                        <img src="${book.cover}" alt="${book.title}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 opacity-90 group-hover:opacity-100">
                        <div class="absolute inset-0 bg-gradient-to-t from-emerald-900/40 to-transparent"></div>
                        <div class="absolute top-3 left-3">
                            <span class="text-[9px] font-bold text-emerald-800 bg-white/90 backdrop-blur px-2.5 py-1 rounded-lg border border-emerald-100 shadow-sm uppercase tracking-wider">${book.category}</span>
                        </div>
                        <div class="absolute bottom-4 left-0 right-0 px-4 text-center">
                             <div class="w-8 h-1 bg-white/50 mx-auto rounded-full mb-2"></div>
                             <i class="fas fa-book-open text-white/70 text-sm"></i>
                        </div>
                    </div>
                    <div class="p-4 md:p-5 flex-1 flex flex-col">
                        <h3 class="font-bold text-slate-800 text-sm md:text-base leading-tight mb-1 line-clamp-2 h-10 group-hover:text-emerald-700 transition duration-300">${book.title}</h3>
                        <p class="text-[10px] md:text-xs text-slate-500 mb-5 italic line-clamp-1 font-medium">${book.author}</p>
                        <a href="${book.downloadUrl}" target="_blank" class="mt-auto w-full bg-emerald-600 text-white text-center py-2.5 rounded-xl font-bold text-[10px] md:text-xs hover:bg-emerald-800 transition duration-300 shadow-sm flex items-center justify-center gap-2">
                            <i class="fas fa-file-pdf"></i> ডাউনলোড করুন
                        </a>
                    </div>
                </div>`;
        }

        function renderPreview() {
            allBooksWrapper.classList.remove('hidden');
            viewTitle.innerText = "বইয়ের সংগ্রহশালা";
            contentDisplay.innerHTML = '';
            const categories = ["ইতিহাস", "ভাষা", "শিক্ষা", "সংস্কৃতি", "সাহিত্য"];
            
            categories.forEach(cat => {
                const catBooks = books.filter(b => b.category === cat).slice(0, 4);
                if(catBooks.length > 0) {
                    const section = document.createElement('div');
                    section.className = 'mb-16';
                    section.innerHTML = `
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-extrabold text-slate-800 flex items-center gap-3">
                                <span class="w-1.5 h-7 bg-emerald-600 rounded-full"></span> ${cat}
                            </h3>
                            <button onclick="filterBooks('${cat}')" class="text-emerald-700 text-sm font-bold hover:text-emerald-900 transition flex items-center gap-1">
                                আরও দেখুন <i class="fas fa-arrow-right text-[10px]"></i>
                            </button>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8">${catBooks.map(createCard).join('')}</div>`;
                    contentDisplay.appendChild(section);
                }
            });
        }

        function renderGallery(dataList) {
            allBooksWrapper.classList.add('hidden');
            contentDisplay.innerHTML = `<div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8">${dataList.map(createCard).join('')}</div>`;
            noBooks.classList.toggle('hidden', dataList.length > 0);
        }

        function filterBooks(category) {
            document.querySelectorAll('.category-btn').forEach(btn => {
                const isActive = btn.innerText === category || (category === 'All' && btn.innerText === 'সবগুলো');
                btn.classList.toggle('btn-active', isActive);
            });

            if (category === 'All') {
                renderPreview();
            } else {
                viewTitle.innerText = category;
                const filtered = books.filter(b => b.category === category);
                renderGallery(filtered);
                window.scrollTo({ top: document.getElementById('books').offsetTop - 100, behavior: 'smooth' });
            }
        }

        function switchToGallery() { 
            filterBooks('All'); 
            renderGallery(books); 
            viewTitle.innerText = "সকল বইয়ের ভাণ্ডার"; 
            window.scrollTo({ top: document.getElementById('books').offsetTop - 100, behavior: 'smooth' });
        }

        function resetView() { 
            searchInput.value = '';
            filterBooks('All'); 
        }

        searchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase().trim();
            if (term === "") {
                resetView();
            } else {
                const filtered = books.filter(b => 
                    b.title.toLowerCase().includes(term) || 
                    b.author.toLowerCase().includes(term) ||
                    b.category.toLowerCase().includes(term)
                );
                renderGallery(filtered);
                viewTitle.innerText = "অনুসন্ধানের ফলাফল";
            }
        });

        window.onload = renderPreview;
    </script>
</body>
</html>
